(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{H5Zv:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var s=a("tk/3"),r=a("2Vo4"),n=a("AytR"),i=a("lJxs"),o=a("IzEk"),c=a("fXoL"),u=a("dNgK");let p=(()=>{class t{constructor(t,e){this.http=t,this.snackBar=e,this.resultSubject$=new r.a(null)}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}storeTransactionType(t){return this.http.post(`${n.a.API}${n.a.routesCRUD.transactionTypes}`,t).pipe(Object(i.a)(t=>(this.getTransactionTypes(1,20,"","desc").pipe(Object(o.a)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),t.data)))}updateTransactionType(t){return this.http.put(`${n.a.API}${n.a.routesCRUD.transactionTypes}/${t.id}`,t).pipe(Object(i.a)(t=>(this.getTransactionTypes(1,20,"","desc").pipe(Object(o.a)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),t.data)))}getTransactionTypes(t=1,e=20,a="",r="desc"){return this.http.get(`${n.a.API}${n.a.routesCRUD.transactionTypes}`,{params:(new s.e).set("page",t.toString()).set("filter",a).set("sort",r).set("per_page",e.toString())}).pipe(Object(i.a)(t=>(console.log(t),this.setItems(t),t)))}deleteTransactionType(t){return this.http.delete(`${n.a.API}${n.a.routesCRUD.transactionTypes}/${t}`).pipe(Object(i.a)(t=>(this.getTransactionTypes(1,20,"","desc").pipe(Object(o.a)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),t.data)))}openSnackBar(t,e,a=""){this.snackBar.open(t,a,{duration:1e3,horizontalPosition:"center",verticalPosition:"top",panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(c.Yb(s.b),c.Yb(u.a))},t.\u0275prov=c.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},RMDf:function(t,e,a){"use strict";a.r(e),a.d(e,"TransactionsModule",(function(){return j}));var s=a("ofXK"),r=a("tyNb"),n=a("3Pt+"),i=a("M9IT"),o=a("lJxs"),c=a("IzEk"),u=a("GH7h"),p=a("fXoL"),l=a("tk/3"),d=a("2Vo4"),b=a("AytR"),h=a("dNgK");let m=(()=>{class t{constructor(t,e){this.http=t,this.snackBar=e,this.resultSubject$=new d.a(null)}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}storeTransaction(t){return this.http.post(`${b.a.API}${b.a.routesCRUD.transactions}`,t).pipe(Object(o.a)(t=>(this.getTransactions(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),t.data)))}updateTransaction(t){return this.http.put(`${b.a.API}${b.a.routesCRUD.transactions}/${t.id}`,t).pipe(Object(o.a)(t=>(this.getTransactions(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),t.data)))}getTransactions(t=1,e=20,a="",s="desc"){return this.http.get(`${b.a.API}${b.a.routesCRUD.transactions}`,{params:(new l.e).set("page",t.toString()).set("filter",a).set("sort",s).set("per_page",e.toString())}).pipe(Object(o.a)(t=>(console.log(t),this.setItems(t),t)))}deleteTransaction(t){return this.http.delete(`${b.a.API}${b.a.routesCRUD.transactions}/${t}`).pipe(Object(o.a)(t=>(this.getTransactions(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),t.data)))}openSnackBar(t,e,a=""){this.snackBar.open(t,a,{duration:1e3,horizontalPosition:"center",verticalPosition:"top",panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(p.Yb(l.b),p.Yb(h.a))},t.\u0275prov=p.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=a("0IaG"),_=a("H5Zv"),v=a("XpUC"),T=a("QCfB"),y=a("Wp6s"),f=a("bTqV"),S=a("NFeN"),C=a("JhQZ"),I=a("lkLn");const k=function(){return[20,50,100]},w=[{path:"",component:(()=>{class t{constructor(t,e,a,s,r){this.transactionsService=t,this.dialog=e,this.transactionsTypeService=a,this.currencyService=s,this.userServices=r,this.columns=[{title:"ID",col:"id"},{title:"Fecha",col:"created_at"},{title:"Tipo de transacci\xf3n",col:"transaction_type_name"},{title:"Comprador/Inquilino",col:"user_customer_name"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.subscroption=[],this.result=this.transactionsService.resultItems$}ngOnInit(){this.subscroption.push(this.transactionsTypeService.getTransactionTypes().pipe(Object(o.a)(t=>t.data.data)).subscribe(t=>this.transactionsTipes_select=t.map(t=>({name:t.name,value:t.id}))),this.currencyService.getCurrencies().subscribe(t=>this.currencies_select=t.map(t=>({name:t.symbol,value:t.id}))),this.userServices.getUsers(1,1e5,"",null,["properties_owner"]).pipe(Object(o.a)(t=>t.data.data)).subscribe(t=>{console.log(t),this.customer_select=t.map(t=>({name:t.name,value:t.id})),this.owners_select=t.filter(t=>t.properties_owner.length>=1).map(t=>({name:t.name,value:t.id}))})),this.getTransactions(this.pageDefault,this.perPage,this.filter,this.orden)}paginatorChange(t){console.log(t),this.getTransactions(t.pageIndex+1,t.pageSize)}getTransactions(t,e,a,s){this.subscroption.push(this.transactionsService.getTransactions(t,e,a,s).subscribe(t=>this.loadData()))}loadData(){this.dataSource=this.result.pipe(Object(o.a)(t=>t.data.data.map(t=>({id:t.id,user_owner_id:t.user_owner_id,user_customer_id:t.user_customer_id,property_id:t.property_id,created_at:t.created_at,transaction_type_id:t.transaction_type_id,value:t.value,currency_id:t.currency_id,date_ini:t.date_ini,date_end:t.date_end,property:t.property,user_owner:t.user_owner,user_customer:t.user_customer,transaction_type:t.transaction_type,transaction_type_name:t.transaction_type.name,user_owner_name:t.user_owner.name,user_customer_name:t.user_customer.name})))),this.totalResut=this.result.pipe(Object(o.a)(t=>t.data.total))}search(t){this.getTransactions(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.transactionsService.deleteTransaction(t)}itemAction(t){console.log(t),"delete"===t.action&&this.deleteItem(t.element.id).pipe(Object(c.a)(1)).subscribe(t=>console.log(t)),"edit"===t.action&&this.openDialog(t.element)}ngOnDestroy(){this.subscroption.map(t=>t.unsubscribe())}add(){}openDialog(t){return this.dialog.open(u.a,{width:"850px",data:this.setFields(t)}).afterClosed().subscribe(t=>{t&&(t.id?this.updateTransaction(t):this.storeTransaction(t))})}setFields(t){return[{nameControl:"id",type:"hidden",value:null==t?void 0:t.id,label:"Id"},{nameControl:"user_owner_id",type:"select",value:null==t?void 0:t.user_owner_id,label:"Propietario",options:this.owners_select,validators:[n.u.required]},{nameControl:"user_customer_id",type:"select",value:null==t?void 0:t.user_customer_id,label:"Comprador/Arrendatario",options:this.customer_select,validators:[n.u.required]},{nameControl:"property_id",type:"select",value:null==t?void 0:t.property_id,label:"Propiedad",options:this.statuses,validators:[n.u.required]},{nameControl:"transaction_type_id",type:"select",value:null==t?void 0:t.transaction_type_id,label:"Tipo de transacci\xf3n",options:this.transactionsTipes_select,validators:[n.u.required]},{nameControl:"currency_id",type:"select",value:null==t?void 0:t.currency_id,label:"Moneda",options:this.currencies_select,validators:[n.u.required]},{nameControl:"value",type:"number",value:null==t?void 0:t.value,label:"Valor",validators:[n.u.required]},{nameControl:"date_ini",type:"date",value:null==t?void 0:t.date_ini,label:"Fecha inicio",validators:[n.u.required]},{nameControl:"date_end",type:"date",value:null==t?void 0:t.date_end,label:"Facha vencimiento",validators:[n.u.required]}]}storeTransaction(t){this.transactionsService.storeTransaction(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t)})}updateTransaction(t){this.transactionsService.updateTransaction(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(p.Ob(m),p.Ob(g.b),p.Ob(_.a),p.Ob(v.a),p.Ob(T.a))},t.\u0275cmp=p.Ib({type:t,selectors:[["mvd-transactions"]],viewQuery:function(t,e){var a;1&t&&p.xc(i.a,!0),2&t&&p.pc(a=p.cc())&&(e.paginator=a.first)},decls:26,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],["mat-flat-button","","color","",1,"btn-simple"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,e){1&t&&(p.Ub(0,"mat-card",0),p.Ub(1,"mat-card-header"),p.Ub(2,"mat-card-title"),p.Dc(3,"Tipos de Propiedad"),p.Tb(),p.Ub(4,"mat-card-subtitle"),p.Dc(5,"Administrar Tipos"),p.Tb(),p.Ub(6,"div",1),p.Ub(7,"button",2),p.bc("click",(function(){return e.openDialog()})),p.Ub(8,"mat-icon",3),p.Dc(9,"add"),p.Tb(),p.Dc(10," Crear "),p.Tb(),p.Ub(11,"button",4),p.Ub(12,"mat-icon",3),p.Dc(13,"print"),p.Tb(),p.Dc(14," Imprimir "),p.Tb(),p.Ub(15,"button",4),p.Ub(16,"mat-icon",3),p.Dc(17,"save_alt"),p.Tb(),p.Dc(18," Exportar "),p.Tb(),p.Tb(),p.Ub(19,"mvd-input-search",5),p.bc("changeSearch",(function(t){return e.search(t)})),p.Tb(),p.Tb(),p.Ub(20,"mat-card-content"),p.Ub(21,"mvd-data-table",6),p.bc("actionChange",(function(t){return e.itemAction(t)})),p.gc(22,"async"),p.Tb(),p.Ub(23,"mat-paginator",7),p.bc("page",(function(t){return e.paginatorChange(t)})),p.gc(24,"async"),p.Tb(),p.Tb(),p.Pb(25,"span",8),p.Tb()),2&t&&(p.Cb(19),p.lc("noteFilterBy","Filtra por T\xedtulo, C\xf3digo o Direcci\xf3n"),p.Cb(2),p.lc("columns",e.columns)("dataSource",p.hc(22,6,e.dataSource)),p.Cb(2),p.lc("length",p.hc(24,8,e.totalResut))("pageSize",e.perPage)("pageSizeOptions",p.mc(10,k)))},directives:[y.a,y.c,y.f,y.e,f.b,S.a,C.a,y.b,I.a,i.a],pipes:[s.b],styles:[""]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[r.f.forChild(w)],r.f]}),t})();var $=a("PCNd");let j=(()=>{class t{}return t.\u0275mod=p.Mb({type:t}),t.\u0275inj=p.Lb({factory:function(e){return new(e||t)},imports:[[s.c,O,$.a]]}),t})()},XpUC:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("AytR"),r=a("lJxs"),n=a("fXoL"),i=a("tk/3");let o=(()=>{class t{constructor(t){this.http=t}getCurrencies(){return this.http.get(`${s.a.API}${s.a.routesCRUD.currencies}`).pipe(Object(r.a)(t=>t.data))}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.b))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);