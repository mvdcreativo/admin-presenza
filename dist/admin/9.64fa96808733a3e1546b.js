(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{QIX0:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var o=i("AytR"),n=i("lJxs"),r=i("fXoL"),c=i("tk/3");let a=(()=>{class t{constructor(t){this.http=t}getStates(){return this.http.get(o.a.API+"provinces").pipe(Object(n.a)(t=>t.data.data))}getCities(){return this.http.get(o.a.API+"cities").pipe(Object(n.a)(t=>t.data.data))}getMunicipality(){return this.http.get(o.a.API+"municipalities").pipe(Object(n.a)(t=>t.data.data))}getNeighborhoods(){return this.http.get(o.a.API+"neighborhoods").pipe(Object(n.a)(t=>t.data.data))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(c.b))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},WTJX:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("fXoL");let n=(()=>{class t{transform(t,e){return console.log(t),e?null==t?void 0:t.filter(t=>t.province_id==e):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Nb({name:"filterCity",type:t,pure:!0}),t})()},a1ig:function(t,e,i){"use strict";i.r(e),i.d(e,"ProductsModule",(function(){return It}));var o=i("ofXK"),n=i("tyNb"),r=i("lJxs"),c=i("IzEk"),a=i("M9IT"),s=i("fXoL"),d=i("uDhH"),u=i("Wp6s"),l=i("bTqV"),p=i("NFeN"),b=i("JhQZ"),g=i("lkLn");const m=function(){return[20,50,100]};let f=(()=>{class t{constructor(t,e){this.productService=t,this.router=e,this.columns=[{title:"C\xf3digo",col:"code"},{title:"Direcci\xf3n ",col:"address"},{title:"Barrio",col:"neighborhood"},{title:"Propietario",col:"owner"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.productService.resultItems$}paginatorChange(t){console.log(t),this.getProducts(t.pageIndex+1,t.pageSize)}ngOnInit(){this.getProducts(this.pageDefault,this.perPage,this.filter,this.orden)}getProducts(t,e,i,o){this.subscroption=this.productService.getProducts(t,e,i,o).subscribe(t=>this.loadData())}loadData(){this.dataSource=this.result.pipe(Object(r.a)(t=>t.data.data.map(t=>{var e;return{id:t.id,code:t.code,title:t.title,owner:t.user_owner.name,address:t.address,neighborhood:t.neighborhood.name,status_id:t.status_id,publication_id:null===(e=t.publication)||void 0===e?void 0:e.id}}))),this.totalResut=this.result.pipe(Object(r.a)(t=>t.data.total))}search(t){this.getProducts(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.productService.deleteProduct(t)}itemAction(t){console.log(t),"delete"===t.action&&this.deleteItem(t.element.id).pipe(Object(c.a)(1)).subscribe(t=>console.log(t)),"edit"===t.action&&this.router.navigate(["/productos/producto",t.element.id])}ngOnDestroy(){this.subscroption.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(d.a),s.Ob(n.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["mvd-products"]],viewQuery:function(t,e){var i;1&t&&s.xc(a.a,!0),2&t&&s.pc(i=s.cc())&&(e.paginator=i.first)},decls:26,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","routerLink","/productos/nuevo-producto","color","primary"],[1,"material-icons-round"],["mat-flat-button","","routerLink","/productos/nuevo-producto","color","",1,"btn-simple"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,e){1&t&&(s.Ub(0,"mat-card",0),s.Ub(1,"mat-card-header"),s.Ub(2,"mat-card-title"),s.Dc(3,"Propiedades"),s.Tb(),s.Ub(4,"mat-card-subtitle"),s.Dc(5,"Administrar Propiedades"),s.Tb(),s.Ub(6,"div",1),s.Ub(7,"button",2),s.Ub(8,"mat-icon",3),s.Dc(9,"add"),s.Tb(),s.Dc(10," Crear "),s.Tb(),s.Ub(11,"button",4),s.Ub(12,"mat-icon",3),s.Dc(13,"print"),s.Tb(),s.Dc(14," Imprimir "),s.Tb(),s.Ub(15,"button",4),s.Ub(16,"mat-icon",3),s.Dc(17,"save_alt"),s.Tb(),s.Dc(18," Exportar "),s.Tb(),s.Tb(),s.Ub(19,"mvd-input-search",5),s.bc("changeSearch",(function(t){return e.search(t)})),s.Tb(),s.Tb(),s.Ub(20,"mat-card-content"),s.Ub(21,"mvd-data-table",6),s.bc("actionChange",(function(t){return e.itemAction(t)})),s.gc(22,"async"),s.Tb(),s.Ub(23,"mat-paginator",7),s.bc("page",(function(t){return e.paginatorChange(t)})),s.gc(24,"async"),s.Tb(),s.Tb(),s.Pb(25,"span",8),s.Tb()),2&t&&(s.Cb(19),s.lc("noteFilterBy","Filtra por T\xedtulo, C\xf3digo o Direcci\xf3n"),s.Cb(2),s.lc("columns",e.columns)("dataSource",s.hc(22,6,e.dataSource)),s.Cb(2),s.lc("length",s.hc(24,8,e.totalResut))("pageSize",e.perPage)("pageSizeOptions",s.mc(10,m)))},directives:[u.a,u.c,u.f,u.e,l.b,n.c,p.a,b.a,u.b,g.a,a.a],pipes:[o.b],styles:[".card[_ngcontent-%COMP%]{width:100%}"]}),t})();var h=i("wZkO"),v=i("3Pt+"),P=i("c2LI"),C=i("QIX0"),O=i("AytR"),y=i("tk/3");let T=(()=>{class t{constructor(t){this.http=t}getPropertyTypes(){return this.http.get(O.a.API+"property_types").pipe(Object(r.a)(t=>t.data.data))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(y.b))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=i("kmnG"),_=i("qFsG"),I=i("d3UM"),S=i("FKr1"),x=i("WTJX"),D=i("tLDm");let M=(()=>{class t{transform(t,e){return e?null==t?void 0:t.filter(t=>t.municipality_id==e):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Nb({name:"filterNeighborhoods",type:t,pure:!0}),t})();function E(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Ec(t.name)}}function k(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Fc(" ",t.name," ")}}function $(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Fc(" ",t.name," ")}}function w(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Fc(" ",t.name," ")}}function F(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Fc(" ",t.name," ")}}function j(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Ec(t.name)}}let B=(()=>{class t{constructor(t,e,i,o,n){this.fb=t,this.statusSetvice=e,this.ubicationService=i,this.propertyTypeService=o,this.productServices=n,this.dataSubmit=new s.o,this.productEdit$=this.productServices.productOnEdit,this.subcriptor=this.productEdit$.subscribe(t=>{this.productEdit=t,this.createForm()})}ngOnInit(){this.getStatus(),this.getPropertyType(),this.states=this.ubicationService.getStates(),this.cities=this.ubicationService.getCities(),this.municipalities=this.ubicationService.getMunicipality(),this.neighborhoods=this.ubicationService.getNeighborhoods()}createForm(){var t,e,i,o,n,r,c,a,s,d,u,l,p,b,g,m,f,h,P,C,O;this.form=this.fb.group({title:[null===(t=this.productEdit)||void 0===t?void 0:t.title,v.u.required],code:[null===(e=this.productEdit)||void 0===e?void 0:e.code,v.u.required],address:[null===(i=this.productEdit)||void 0===i?void 0:i.address,v.u.required],description:[null===(o=this.productEdit)||void 0===o?void 0:o.description],status_id:[null===(n=this.productEdit)||void 0===n?void 0:n.status_id,v.u.required],property_type_id:[null===(r=this.productEdit)||void 0===r?void 0:r.property_type_id,v.u.required],neighborhood_id:[null===(c=this.productEdit)||void 0===c?void 0:c.neighborhood_id,v.u.required],latitude:[null===(a=this.productEdit)||void 0===a?void 0:a.latitude],longitude:[null===(s=this.productEdit)||void 0===s?void 0:s.longitude],user_owner_id:[null!==(u=null===(d=this.productEdit)||void 0===d?void 0:d.user_owner_id)&&void 0!==u?u:1,v.u.required],images:[null===(l=this.productEdit)||void 0===l?void 0:l.images],videos:[null],city:[null===(g=null===(b=null===(p=this.productEdit)||void 0===p?void 0:p.neighborhood)||void 0===b?void 0:b.municipality)||void 0===g?void 0:g.city_id],state:[null===(P=null===(h=null===(f=null===(m=this.productEdit)||void 0===m?void 0:m.neighborhood)||void 0===f?void 0:f.municipality)||void 0===h?void 0:h.city)||void 0===P?void 0:P.province_id],municipality:[null===(O=null===(C=this.productEdit)||void 0===C?void 0:C.neighborhood)||void 0===O?void 0:O.municipality_id]})}getStatus(){this.statuses=this.statusSetvice.getStatus("PR,ALL")}onSelectState(){this.form.controls.city.setValue(null,{emitEvent:!1}),this.form.controls.municipality.setValue(null,{emitEvent:!1}),this.form.controls.neighborhood_id.setValue(null,{emitEvent:!1})}onSelectCity(){this.form.controls.municipality.setValue(null,{emitEvent:!1}),this.form.controls.neighborhood_id.setValue(null,{emitEvent:!1})}onSelectMunicipality(){this.form.controls.neighborhood_id.setValue(null,{emitEvent:!1})}onSelectNeighborhood(){}onSubmit(){this.dataSubmit.emit({data:this.form.value,indexTab:0})}getPropertyType(){this.propertyTypes=this.propertyTypeService.getPropertyTypes()}ngOnDestroy(){this.subcriptor.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(v.f),s.Ob(P.a),s.Ob(C.a),s.Ob(T),s.Ob(d.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["mvd-form-product"]],outputs:{dataSubmit:"dataSubmit"},decls:69,vars:28,consts:[[3,"formGroup"],["appearance","outline",1,""],["formControlName","code","matInput","","placeholder","Cod.Ref"],["appearance","outline",1,"c2-1"],["formControlName","title","matInput","","placeholder","Titulo descriptivo"],["appearance","outline"],["formControlName","property_type_id"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"c1-1"],["formControlName","address","matInput","","placeholder","Direcci\xf3n"],["placeholder","Seleccione Provincia...","formControlName","state",3,"selectionChange"],["placeholder","Seleccione Ciudad...","formControlName","city",3,"selectionChange"],["placeholder","Seleccione Municipalidad...","formControlName","municipality",3,"selectionChange"],["placeholder","Selecciona Localidad/Barrio...","formControlName","neighborhood_id",3,"selectionChange"],["formControlName","status_id"],["formControlName","latitude","matInput","","placeholder","Latitud"],["formControlName","longitude","matInput","","placeholder","Longitud"],["appearance","outline",1,"mvd-col1--1"],["formControlName","description","matInput","","placeholder","Descripci\xf3n",2,"min-height","200px"],["mat-flat-button","","color","primary",3,"click"],[3,"value"]],template:function(t,e){1&t&&(s.Ub(0,"form",0),s.Ub(1,"mat-form-field",1),s.Ub(2,"mat-label"),s.Dc(3,"C\xf3digo"),s.Tb(),s.Pb(4,"input",2),s.Tb(),s.Ub(5,"mat-form-field",3),s.Ub(6,"mat-label"),s.Dc(7,"Titulo"),s.Tb(),s.Pb(8,"input",4),s.Tb(),s.Ub(9,"mat-form-field",5),s.Ub(10,"mat-label"),s.Dc(11,"Tipo de Propiedad"),s.Tb(),s.Ub(12,"mat-select",6),s.Ub(13,"mat-option"),s.Dc(14,"Selecciona..."),s.Tb(),s.Bc(15,E,2,2,"mat-option",7),s.gc(16,"async"),s.Tb(),s.Tb(),s.Ub(17,"mat-form-field",8),s.Ub(18,"mat-label"),s.Dc(19,"Direcci\xf3n"),s.Tb(),s.Pb(20,"input",9),s.Tb(),s.Ub(21,"mat-form-field",1),s.Ub(22,"mat-label"),s.Dc(23,"Provincia"),s.Tb(),s.Ub(24,"mat-select",10),s.bc("selectionChange",(function(){return e.onSelectState()})),s.Bc(25,k,2,2,"mat-option",7),s.gc(26,"async"),s.Tb(),s.Tb(),s.Ub(27,"mat-form-field",1),s.Ub(28,"mat-label"),s.Dc(29,"Ciudad"),s.Tb(),s.Ub(30,"mat-select",11),s.bc("selectionChange",(function(){return e.onSelectCity()})),s.Bc(31,$,2,2,"mat-option",7),s.gc(32,"filterCity"),s.gc(33,"async"),s.Tb(),s.Tb(),s.Ub(34,"mat-form-field",1),s.Ub(35,"mat-label"),s.Dc(36,"Municipalidad"),s.Tb(),s.Ub(37,"mat-select",12),s.bc("selectionChange",(function(){return e.onSelectMunicipality()})),s.Bc(38,w,2,2,"mat-option",7),s.gc(39,"filterMunicipality"),s.gc(40,"async"),s.Tb(),s.Tb(),s.Ub(41,"mat-form-field",1),s.Ub(42,"mat-label"),s.Dc(43,"Localidad/Barrio"),s.Tb(),s.Ub(44,"mat-select",13),s.bc("selectionChange",(function(){return e.onSelectNeighborhood()})),s.Bc(45,F,2,2,"mat-option",7),s.gc(46,"filterNeighborhoods"),s.gc(47,"async"),s.Tb(),s.Tb(),s.Ub(48,"mat-form-field",5),s.Ub(49,"mat-label"),s.Dc(50,"Status"),s.Tb(),s.Ub(51,"mat-select",14),s.Bc(52,j,2,2,"mat-option",7),s.gc(53,"async"),s.Tb(),s.Tb(),s.Ub(54,"mat-form-field",1),s.Ub(55,"mat-label"),s.Dc(56,"Latitud"),s.Tb(),s.Pb(57,"input",15),s.Tb(),s.Ub(58,"mat-form-field",1),s.Ub(59,"mat-label"),s.Dc(60,"Longitud"),s.Tb(),s.Pb(61,"input",16),s.Tb(),s.Ub(62,"mat-form-field",17),s.Ub(63,"mat-label"),s.Dc(64,"Descripci\xf3n"),s.Tb(),s.Pb(65,"textarea",18),s.Tb(),s.Ub(66,"span"),s.Ub(67,"button",19),s.bc("click",(function(){return e.onSubmit()})),s.Dc(68,"Sigiente"),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.lc("formGroup",e.form),s.Cb(15),s.lc("ngForOf",s.hc(16,7,e.propertyTypes)),s.Cb(10),s.lc("ngForOf",s.hc(26,9,e.states)),s.Cb(6),s.lc("ngForOf",s.ic(32,11,s.hc(33,14,e.cities),e.form.get("state").value)),s.Cb(7),s.lc("ngForOf",s.ic(39,16,s.hc(40,19,e.municipalities),e.form.get("city").value)),s.Cb(7),s.lc("ngForOf",s.ic(46,21,s.hc(47,24,e.neighborhoods),e.form.get("municipality").value)),s.Cb(7),s.lc("ngForOf",s.hc(53,26,e.statuses)))},directives:[v.v,v.q,v.j,U.c,U.f,v.c,_.b,v.p,v.i,I.a,S.m,o.k,l.b],pipes:[o.b,x.a,D.a,M],styles:["form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1rem;align-items:center;justify-content:center;padding:1rem!important}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{grid-column:1/-1;justify-content:center}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 50px}"]}),t})();var N=i("PUnq");let L=(()=>{class t{constructor(t){this.http=t}getFeatures(){return this.http.get(O.a.API+"features_all").pipe(Object(r.a)(t=>t.data.filter(t=>t.features.length>=1)))}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(y.b))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=i("bSwM");function z(t,e){if(1&t&&(s.Ub(0,"div",12),s.Ub(1,"mat-checkbox",13),s.Dc(2),s.Tb(),s.Pb(3,"input",14),s.Tb()),2&t){const t=s.fc().index,e=s.fc().index,i=s.fc(2);s.Cb(2),s.Fc(" ",i.features[e].features[t].name," ")}}function R(t,e){if(1&t&&(s.Ub(0,"div"),s.Pb(1,"input",14),s.Ub(2,"mat-form-field",15),s.Ub(3,"mat-label"),s.Dc(4),s.Tb(),s.Pb(5,"input",16),s.Tb(),s.Tb()),2&t){const t=s.fc().index,e=s.fc().index,i=s.fc(2);s.Cb(4),s.Ec(i.features[e].features[t].name),s.Cb(1),s.lc("placeholder",i.features[e].features[t].name)}}function G(t,e){if(1&t&&(s.Ub(0,"mat-option",19),s.Dc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.value),s.Cb(1),s.Ec(t.name)}}function V(t,e){if(1&t&&(s.Ub(0,"div"),s.Pb(1,"input",14),s.Ub(2,"mat-form-field",15),s.Ub(3,"mat-label"),s.Dc(4,"Status"),s.Tb(),s.Ub(5,"mat-select",17),s.Ub(6,"mat-option"),s.Dc(7," Selecciona..."),s.Tb(),s.Bc(8,G,2,2,"mat-option",18),s.Tb(),s.Tb(),s.Tb()),2&t){const t=s.fc(4);s.Cb(8),s.lc("ngForOf",t.optionsStatusProperty)}}function q(t,e){if(1&t&&(s.Ub(0,"div",8),s.Ub(1,"span",9),s.Bc(2,z,4,1,"div",10),s.Bc(3,R,6,2,"div",11),s.Bc(4,V,9,1,"div",11),s.Tb(),s.Tb()),2&t){const t=e.index,i=s.fc().index,o=s.fc(2);s.lc("formArrayName",i),s.Cb(1),s.lc("formGroupName",t),s.Cb(1),s.lc("ngIf","OPC"===o.features[i].features[t].type),s.Cb(1),s.lc("ngIf","OPC"!==o.features[i].features[t].type&&18!==o.features[i].features[t].id),s.Cb(1),s.lc("ngIf",18===o.features[i].features[t].id)}}const X=function(t){return["features",t]};function J(t,e){if(1&t&&(s.Ub(0,"section",5),s.Ub(1,"h2"),s.Dc(2),s.Tb(),s.Ub(3,"div",6),s.Bc(4,q,5,5,"div",7),s.Tb(),s.Tb()),2&t){const t=e.index,i=s.fc(2);s.Cb(2),s.Ec(i.features[t].name),s.Cb(2),s.lc("ngForOf",i.form.get(s.nc(2,X,t)).controls)}}function K(t,e){if(1&t){const t=s.Vb();s.Ub(0,"form",1),s.Ub(1,"span"),s.Bc(2,J,5,4,"section",2),s.Tb(),s.Ub(3,"span",3),s.Ub(4,"button",4),s.bc("click",(function(){return s.tc(t),s.fc().onSubmit()})),s.Dc(5,"Sigiente"),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=s.fc();s.lc("formGroup",t.form),s.Cb(2),s.lc("ngForOf",t.form.get("features").controls)}}let Y=(()=>{class t{constructor(t,e,i){this.featureService=t,this.fb=e,this.productServices=i,this.dataFeatures=new s.o,this.getFeatures(),this.optionsStatusProperty=N.selects.estado_propiedad}ngOnInit(){this.productEdit$=this.productServices.productOnEdit}getFeatures(){this.featureService.getFeatures().pipe(Object(c.a)(1)).subscribe(t=>{this.features=t,console.log(this.features),this.subcriptor=this.productEdit$.subscribe(t=>{this.productEdit=t}),this.createForm()})}createForm(){this.form=this.fb.group({features:this.addGroups()}),this.features.map((t,e)=>this.addFeatures(t,e))}addGroups(){const t=this.features.map((t,e)=>new v.d([]));return this.fb.array(t)}addFeatures(t,e){let i=this.form.get(["features",e]);return t.features.map(t=>{var e,o;if(this.productEdit){const i=null===(o=null===(e=this.productEdit)||void 0===e?void 0:e.features)||void 0===o?void 0:o.filter(e=>e.pivot.feature_id===t.id);if((null==i?void 0:i.length)>=1)var n=i[0].pivot.value,r=!0}i.push(this.fb.group({feature_id:[t.id],value:[null!=n?n:null],check:[null!=r?r:null]}))}),i}onSubmit(){console.log(this.form.value);let t=[];const e=t.concat(...t.concat(...this.form.get("features").value)).filter(t=>!0===t.check||null!==t.check||null!==t.value).map(t=>({feature_id:t.feature_id,value:t.value}));this.dataFeatures.emit({features:e})}ngOnDestroy(){this.subcriptor.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(L),s.Ob(v.f),s.Ob(d.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["mvd-features"]],outputs:{dataFeatures:"dataFeatures"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["formArrayName","features","class","featureGroup",4,"ngFor","ngForOf"],[1,"button-content"],["mat-flat-button","","color","primary",3,"click"],["formArrayName","features",1,"featureGroup"],[1,"content-group"],[3,"formArrayName",4,"ngFor","ngForOf"],[3,"formArrayName"],[3,"formGroupName"],["class","checkbox",4,"ngIf"],[4,"ngIf"],[1,"checkbox"],["formControlName","check"],["formControlName","feature_id","type","hidden"],["appearance","outline",1,""],["formControlName","value","matInput","",3,"value","placeholder"],["formControlName","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&s.Bc(0,K,6,2,"form",0),2&t&&s.lc("ngIf",e.features)},directives:[o.l,v.v,v.q,v.j,o.k,l.b,v.e,v.k,A.a,v.p,v.i,v.c,U.c,U.f,_.b,I.a,S.m],styles:["form[_ngcontent-%COMP%]{display:grid!important;padding:1rem!important}form[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .featureGroup[_ngcontent-%COMP%]{box-sizing:border-box!important}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .featureGroup[_ngcontent-%COMP%]{display:grid!important;margin-bottom:3rem;padding:0!important}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .featureGroup[_ngcontent-%COMP%]   .content-group[_ngcontent-%COMP%]{box-sizing:border-box!important;display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1rem;align-items:center;justify-content:center}form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .featureGroup[_ngcontent-%COMP%]   .content-group[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{box-sizing:border-box!important;padding-bottom:20px;padding-left:5px}form[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{grid-column:1/-1;justify-content:center;margin-left:auto;margin-right:auto}form[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding:10px 50px}"]}),t})();var Q=i("5+WD"),W=i("2Vo4");let H=(()=>{class t{constructor(t,e){this.http=t,this.productService=e,this.progressSubject$=new W.a(100),this.loadingImage$=new W.a(!1),this.loadingImage$.next(!1)}getImages(){this.http.get(O.a.API+"properties")}updateImage(t){t.map(t=>this.http.put(`${O.a.API}images/${t.id}`,t).pipe(Object(c.a)(1)).subscribe())}uploadImage(t,e,i){const o=new FormData;console.log(e);for(let n=0;n<e.length;n++)o.append("images[]",e[n]);return o.append("_method","PUT"),this.http.post(`${O.a.API}properties/${t.id}`,o,{observe:"events",reportProgress:!0}).subscribe(t=>{if(t.type===y.d.Response){console.log("Upload Conclu\xeddo"),console.log(t.body);const e=t.body;console.log(e.data),this.loadingImage$.next(!1),this.productService.setProductOnEdit(e.data)}else if(t.type===y.d.UploadProgress){const e=Math.round(100*t.loaded/t.total);console.log("Progresso",e),this.progressSubject$.next(e),this.loadingImage$.next(!0)}})}removeImageId(t,e){let i=(new y.e).set("image_id",t);return this.http.delete(`${O.a.API}properties/${e}`,{params:i}).pipe(Object(c.a)(1),Object(r.a)(t=>t.data)).subscribe(t=>{t&&this.productService.productOnEdit.pipe(Object(r.a)(e=>(e.images=t.images,e)),Object(c.a)(5)).subscribe(t=>this.productService.setProductOnEdit(t))})}getImageLoading$(){return this.loadingImage$}setImageLoading(t){this.loadingImage$.next(t)}getProsess$(){return this.progressSubject$}setProsess(t){this.progressSubject$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(y.b),s.Yb(d.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=i("bv9b");function tt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",3),s.Ub(1,"div",4),s.Ub(2,"label",5),s.Ub(3,"div",6),s.Pb(4,"img",7),s.Tb(),s.Tb(),s.Ub(5,"input",8),s.bc("change",(function(e){return s.tc(t),s.fc().uploadImage(e)})),s.Tb(),s.Tb(),s.Pb(6,"div",9),s.Tb()}2&t&&(s.Cb(4),s.lc("src","../../../../../../assets/images/no-image.svg",s.uc))}function et(t,e){if(1&t&&(s.Pb(0,"mat-progress-bar",10),s.gc(1,"async")),2&t){const t=s.fc();s.lc("value",s.hc(1,1,t.progresUpload$))}}function it(t,e){if(1&t){const t=s.Vb();s.Ub(0,"mat-icon",18),s.bc("click",(function(){s.tc(t);const e=s.fc().$implicit;return s.fc(3).removeImage(e.id)})),s.Dc(1,"delete"),s.Tb()}}function ot(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",15),s.bc("mouseover",(function(){return s.tc(t),s.fc(3).showDelete=!0}))("mouseleave",(function(){return s.tc(t),s.fc(3).showDelete=!1})),s.Bc(1,it,2,0,"mat-icon",16),s.Pb(2,"img",17),s.Tb()}if(2&t){const t=e.$implicit,i=s.fc(3);s.Cb(1),s.lc("ngIf",i.showDelete),s.Cb(1),s.lc("src",t.url||"../../../../../../assets/images/no-image.svg",s.uc)}}function nt(t,e){if(1&t&&(s.Sb(0),s.Bc(1,ot,3,2,"div",14),s.Rb()),2&t){const t=s.fc(2);s.Cb(1),s.lc("ngForOf",t.images)}}function rt(t,e){1&t&&(s.Ub(0,"span"),s.Dc(1,"Subiendo imagenes..."),s.Tb())}function ct(t,e){1&t&&(s.Ub(0,"span"),s.Dc(1,"Escalando imagenes..."),s.Tb())}function at(t,e){if(1&t&&(s.Ub(0,"div",19),s.Ub(1,"div",20),s.Pb(2,"div"),s.Pb(3,"div"),s.Pb(4,"div"),s.Tb(),s.Bc(5,rt,2,0,"span",21),s.gc(6,"async"),s.Bc(7,ct,2,0,"span",21),s.gc(8,"async"),s.Tb()),2&t){const t=s.fc(2);s.Cb(5),s.lc("ngIf",100!==s.hc(6,2,t.progresUpload$)),s.Cb(2),s.lc("ngIf",100===s.hc(8,4,t.progresUpload$))}}function st(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",11),s.bc("cdkDropListDropped",(function(e){return s.tc(t),s.fc().drop(e)})),s.Bc(1,nt,2,1,"ng-container",12),s.gc(2,"async"),s.Bc(3,at,9,6,"ng-template",null,13,s.Cc),s.Tb()}if(2&t){const t=s.qc(4),e=s.fc();s.Cb(1),s.lc("ngIf",0==s.hc(2,2,e.loadingImage$))("ngIfElse",t)}}let dt=(()=>{class t{constructor(t,e){this.imagesServices=t,this.productServices=e,this.progress=0,this.showDelete=!1,this.images=[]}ngOnInit(){this.productServices.productOnEdit.subscribe(t=>{var e;return this.data=t,this.images=null!==(e=null==t?void 0:t.images)&&void 0!==e?e:[],this.progresUpload$=this.imagesServices.getProsess$(),this.loadingImage$=this.imagesServices.getImageLoading$(),this.data})}drop(t){console.log(t),Object(Q.d)(this.images,t.previousIndex,t.currentIndex),console.log(this.images);const e=this.images.map((t,e)=>({id:t.id,position:e}));console.log(e),this.imagesServices.updateImage(e)}uploadImage(t){console.log(t),t.target.files&&t.target.files[0]&&this.imagesServices.uploadImage(this.data,t.target.files)}removeImage(t){this.imagesServices.removeImageId(t,this.data.id)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(H),s.Ob(d.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["mvd-images-drag-drop"]],decls:4,vars:5,consts:[["class","container",4,"ngIf"],["mode","determinate",3,"value",4,"ngIf"],["cdkDropList","","cdkDropListOrientation","horizontal","class","list",3,"cdkDropListDropped",4,"ngIf"],[1,"container"],[1,"upload"],["for","file"],[1,"image-input"],["alt","Subir Imagen",3,"src"],["id","file","hidden","","type","file","multiple","",3,"change"],[1,"instructions"],["mode","determinate",3,"value"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"list",3,"cdkDropListDropped"],[4,"ngIf","ngIfElse"],["loading",""],["class","box","cdkDrag","",3,"mouseover","mouseleave",4,"ngFor","ngForOf"],["cdkDrag","",1,"box",3,"mouseover","mouseleave"],["class","delete-image","color","warn",3,"click",4,"ngIf"],["alt","",3,"src"],["color","warn",1,"delete-image",3,"click"],[1,"div-content"],[1,"loading"],[4,"ngIf"]],template:function(t,e){1&t&&(s.Bc(0,tt,7,1,"div",0),s.Bc(1,et,2,3,"mat-progress-bar",1),s.gc(2,"async"),s.Bc(3,st,5,4,"div",2)),2&t&&(s.lc("ngIf",e.data),s.Cb(1),s.lc("ngIf",100!==s.hc(2,3,e.progresUpload$)),s.Cb(2),s.lc("ngIf",e.images))},directives:[o.l,Z.a,Q.b,o.k,Q.a,p.a],pipes:[o.b],styles:[".container[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:150px auto}.container[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]{width:150px;box-sizing:border-box}.container[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;width:100%;height:100%;border:1px dashed #ccc;border-radius:5px;cursor:pointer}.container[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-content:center}.container[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:.5rem;width:100%}.container[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{width:100%;height:100%;background-image:url(dragdrop.04a9eac0ac9c3e0dcea0.svg);background-repeat:no-repeat;background-position:0;background-position-x:10%}.list[_ngcontent-%COMP%]{min-width:80px;min-height:80px;display:flex;flex-direction:row;border-radius:4px;overflow:hidden;overflow-x:auto;padding:1rem}.box[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box}.box[_ngcontent-%COMP%]{float:left;width:80px;height:80px;margin:2px;padding:3px;border:1px solid #ccc;border-radius:5px;color:rgba(0,0,0,.87);cursor:move;position:relative}.box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;object-fit:cover;z-index:100}.box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.5}.box[_ngcontent-%COMP%]   .delete-image[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:3px;right:3px;z-index:200}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t})();const ut=function(){return["/productos"]};let lt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["mvd-images-product"]],decls:4,vars:2,consts:[[1,"button-content"],["mat-flat-button","","color","primary","type","submit",3,"routerLink"]],template:function(t,e){1&t&&(s.Pb(0,"mvd-images-drag-drop"),s.Ub(1,"span",0),s.Ub(2,"button",1),s.Dc(3,"Finalizar"),s.Tb(),s.Tb()),2&t&&(s.Cb(2),s.lc("routerLink",s.mc(1,ut)))},directives:[dt,l.b,n.c],styles:[".button-content[_ngcontent-%COMP%]{display:grid;grid-column:1/-1;justify-content:center;margin-left:auto;margin-right:auto}.button-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding:10px 50px}"]}),t})();var pt=i("vgEV");function bt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"mvd-features",14),s.bc("dataFeatures",(function(e){return s.tc(t),s.fc(2).updateProduct(e)})),s.Tb()}}function gt(t,e){1&t&&(s.Ub(0,"span",15),s.Dc(1,"Primero ingresa los Datos B\xe1sicos"),s.Tb())}function mt(t,e){1&t&&s.Pb(0,"mvd-images-product")}function ft(t,e){1&t&&(s.Ub(0,"span",15),s.Dc(1,"Primero ingresa los Datos B\xe1sicos"),s.Tb())}function ht(t,e){if(1&t&&s.Pb(0,"mvd-form-publication",16),2&t){const t=s.fc(2);s.lc("idProperty",null==t.productEdit?null:t.productEdit.id)("titlePropety",null==t.productEdit?null:t.productEdit.title)("idPublication",null==t.productEdit||null==t.productEdit.publication?null:t.productEdit.publication.id)}}function vt(t,e){1&t&&(s.Ub(0,"span",15),s.Dc(1,"Primero ingresa los Datos B\xe1sicos"),s.Tb())}function Pt(t,e){if(1&t){const t=s.Vb();s.Sb(0),s.Ub(1,"mat-tab-group",4),s.Ub(2,"mat-tab",5),s.Ub(3,"mvd-form-product",6),s.bc("dataSubmit",(function(e){return s.tc(t),s.fc().dataSubmit(e)})),s.Tb(),s.Tb(),s.Ub(4,"mat-tab",7),s.Bc(5,bt,1,0,"mvd-features",8),s.Bc(6,gt,2,0,"span",9),s.Tb(),s.Ub(7,"mat-tab",10),s.Bc(8,mt,1,0,"mvd-images-product",11),s.Bc(9,ft,2,0,"span",9),s.Tb(),s.Ub(10,"mat-tab",12),s.Bc(11,ht,1,3,"mvd-form-publication",13),s.Bc(12,vt,2,0,"span",9),s.Tb(),s.Tb(),s.Rb()}if(2&t){const t=s.fc();s.Cb(1),s.lc("selectedIndex",t.indexTab),s.Cb(4),s.lc("ngIf",t.productEdit),s.Cb(1),s.lc("ngIf",!t.productEdit),s.Cb(2),s.lc("ngIf",t.productEdit),s.Cb(1),s.lc("ngIf",!t.productEdit),s.Cb(2),s.lc("ngIf",t.productEdit),s.Cb(1),s.lc("ngIf",!t.productEdit)}}function Ct(t,e){1&t&&(s.Ub(0,"div",17),s.Ub(1,"div",18),s.Pb(2,"div"),s.Pb(3,"div"),s.Pb(4,"div"),s.Tb(),s.Tb())}let Ot=(()=>{class t{constructor(t,e,i){this.productService=t,this.activateRouter=e,this.router=i,this.indexTab=0,this.edit=!1,this.subscriptions=[],this.activateRouter.paramMap.subscribe(t=>{t.params.id?(this.subscriptions.push(this.productService.getProduct(t.params.id).subscribe(t=>this.productEdit=t)),this.indexTab=t.params.tab?t.params.tab:0,this.edit=!0):this.productEdit=null})}ngOnInit(){}dataSubmit(t){0===t.indexTab&&(this.productEdit?(console.log(this.productEdit),console.log(this.indexTab),this.updateProduct(t.data)):(this.subscriptions.push(this.productService.productOnEdit.subscribe(t=>this.productEdit=t)),this.addProduct(t.data)))}addProduct(t){this.productService.storeProduct(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t),this.indexTab=1})}updateFeatures(t){this.updateProduct(t)}updateProduct(t){this.productService.updateProduct(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t),this.indexTab++})}ngOnDestroy(){this.subscriptions.map(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(d.a),s.Ob(n.a),s.Ob(n.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["ng-component"]],decls:12,vars:3,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[4,"ngIf","ngIfElse"],["loading",""],[1,"border"],["mat-stretch-tabs","",1,"",3,"selectedIndex"],["label","Datos B\xe1sicos"],[3,"dataSubmit"],["label","Caracter\xedsticas"],[3,"dataFeatures",4,"ngIf"],["class","no-productEdit",4,"ngIf"],["label","Im\xe1genes"],[4,"ngIf"],["label","Publicaci\xf3n"],[3,"idProperty","titlePropety","idPublication",4,"ngIf"],[3,"dataFeatures"],[1,"no-productEdit"],[3,"idProperty","titlePropety","idPublication"],[1,"div-content"],[1,"loading"]],template:function(t,e){if(1&t&&(s.Ub(0,"mat-card",0),s.Ub(1,"mat-card-header"),s.Ub(2,"mat-card-title"),s.Dc(3,"Propiedad"),s.Tb(),s.Ub(4,"mat-card-subtitle"),s.Dc(5,"Detalles de la Propiedad "),s.Ub(6,"strong"),s.Dc(7),s.Tb(),s.Tb(),s.Tb(),s.Bc(8,Pt,13,7,"ng-container",1),s.Bc(9,Ct,5,0,"ng-template",null,2,s.Cc),s.Pb(11,"span",3),s.Tb()),2&t){const t=s.qc(10);s.Cb(7),s.Ec(null==e.productEdit?null:e.productEdit.title),s.Cb(1),s.lc("ngIf",!1===e.edit||e.productEdit)("ngIfElse",t)}},directives:[u.a,u.c,u.f,u.e,o.l,h.b,h.a,B,Y,lt,pt.a],styles:[".no-productEdit[_ngcontent-%COMP%]{display:grid;width:100%;margin-top:100px!important;font-weight:500;text-align:center;font-size:16px}"]}),t})();const yt=[{path:"nuevo-producto",component:Ot},{path:"producto/:id",component:Ot},{path:"producto/:id/:tab",component:Ot},{path:"",component:f}];let Tt=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(yt)],n.f]}),t})();var Ut=i("PCNd"),_t=i("bcd/");let It=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[o.c,Tt,Ut.a,_t.PublicationsModule]]}),t})()},tLDm:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("fXoL");let n=(()=>{class t{transform(t,e){return e?null==t?void 0:t.filter(t=>t.city_id==e):t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Nb({name:"filterMunicipality",type:t,pure:!0}),t})()},uDhH:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var o=i("2Vo4"),n=i("tk/3"),r=i("AytR"),c=i("lJxs"),a=i("IzEk"),s=i("fXoL"),d=i("dNgK");let u=(()=>{class t{constructor(t,e){this.http=t,this.snackBar=e,this.productEditSubject$=new o.a(null),this.urlUtils="src/app/shared/utils/data/",this.resultSubject$=new o.a(null)}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}get productOnEdit(){return this.productEditSubject$}setProductOnEdit(t){this.productEditSubject$.next(t)}storeProduct(t){return this.http.post(`${r.a.API}${r.a.routesCRUD.products}`,t).pipe(Object(c.a)(t=>(this.setProductOnEdit(t.data),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),t.data)))}updateProduct(t){const e=this.productEditSubject$.value.id;return t._method="put",this.http.post(`${r.a.API}${r.a.routesCRUD.products}/${e}`,t).pipe(Object(c.a)(t=>(this.setProductOnEdit(t.data),this.openSnackBar("Actualizado correctamente","success-snack-bar"),t.data)))}deleteProduct(t){return this.http.delete(`${r.a.API}${r.a.routesCRUD.products}/${t}`).pipe(Object(c.a)(t=>(this.getProducts(1,20,"","desc").pipe(Object(a.a)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),t.data)))}getProduct(t){return this.http.get(`${r.a.API}${r.a.routesCRUD.products}/${t}`).pipe(Object(c.a)(t=>(this.setProductOnEdit(t.data),t.data)))}getProducts(t=1,e=20,i="",o="desc"){return this.http.get(`${r.a.API}${r.a.routesCRUD.products}`,{params:(new n.e).set("page",t.toString()).set("filter",i).set("sort",o).set("per_page",e.toString())}).pipe(Object(c.a)(t=>(console.log(t),this.setProductOnEdit(null),this.setItems(t),t)))}getOptionsSelect(){return this.http.get(this.urlUtils+"forms.json")}getProductsUser(t){return this.http.get(`${r.a.API}${r.a.routesCRUD.properties_user}/${t}`).pipe(Object(c.a)(t=>t.data))}openSnackBar(t,e,i=""){this.snackBar.open(t,i,{duration:1e3,horizontalPosition:"center",verticalPosition:"top",panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(n.b),s.Yb(d.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);