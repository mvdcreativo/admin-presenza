(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{U5Jw:function(e,t,a){"use strict";a.r(t),a.d(t,"CategoriesModule",(function(){return w}));var i=a("ofXK"),n=a("tyNb"),r=a("M9IT"),s=a("GH7h"),o=a("lJxs"),c=a("IzEk"),l=a("3Pt+"),d=a("fXoL"),u=a("tk/3"),p=a("AytR"),m=a("2Vo4"),g=a("dNgK");let h=(()=>{class e{constructor(e,t){this.http=e,this.snackBar=t,this.resultSubject$=new m.a(null)}get resultItems$(){return this.resultSubject$}setItems(e){this.resultSubject$.next(e)}storeCategory(e){return this.http.post(`${p.a.API}${p.a.routesCRUD.categories}`,e).pipe(Object(o.a)(e=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),e.data)))}updateCategory(e){return this.http.put(`${p.a.API}${p.a.routesCRUD.categories}/${e.id}`,e).pipe(Object(o.a)(e=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),e.data)))}getCategories(e=1,t=20,a="",i="desc"){return this.http.get(`${p.a.API}${p.a.routesCRUD.categories}`,{params:(new u.e).set("page",e.toString()).set("filter",a).set("sort",i).set("per_page",t.toString())}).pipe(Object(o.a)(e=>(console.log(e),this.setItems(e),e)))}deleteCategory(e){return this.http.delete(`${p.a.API}${p.a.routesCRUD.categories}/${e}`).pipe(Object(o.a)(e=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),e.data)))}openSnackBar(e,t,a=""){this.snackBar.open(e,a,{duration:1e3,horizontalPosition:"center",verticalPosition:"top",panelClass:t})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](u.b),d["\u0275\u0275inject"](g.a))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=a("0IaG"),f=a("c2LI"),S=a("Wp6s"),v=a("bTqV"),C=a("NFeN"),y=a("JhQZ"),I=a("lkLn");const j=function(){return[20,50,100]},E=[{path:"",component:(()=>{class e{constructor(e,t,a){this.categoriesService=e,this.dialog=t,this.statusService=a,this.columns=[{title:"ID",col:"id"},{title:"Nombre",col:"name"},{title:"Descripci\xf3n",col:"description"},{title:"Estado",col:"status"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.categoriesService.resultItems$}ngOnInit(){this.getCategories(this.pageDefault,this.perPage,this.filter,this.orden),this.getStatus()}paginatorChange(e){console.log(e),this.getCategories(e.pageIndex+1,e.pageSize)}getCategories(e,t,a,i){this.subscroption=this.categoriesService.getCategories(e,t,a,i).subscribe(e=>this.loadData())}loadData(){this.dataSource=this.result.pipe(Object(o.a)(e=>e.data.data.map(e=>({id:e.id,name:e.name,description:e.description,status_id:e.status_id,status:e.status.name})))),this.totalResut=this.result.pipe(Object(o.a)(e=>e.data.total))}search(e){this.getCategories(this.pageDefault,this.perPage,e,this.orden)}deleteItem(e){return this.categoriesService.deleteCategory(e)}itemAction(e){console.log(e),"delete"===e.action&&this.deleteItem(e.element.id).pipe(Object(c.a)(1)).subscribe(e=>console.log(e)),"edit"===e.action&&this.openDialog(e.element)}ngOnDestroy(){this.subscroption.unsubscribe()}add(){}openDialog(e){return this.dialog.open(s.a,{width:"850px",data:this.setFields(e)}).afterClosed().subscribe(e=>{e&&(e.id?this.updateCategory(e):this.storeCategory(e))})}setFields(e){return[{nameControl:"id",type:"hidden",value:null==e?void 0:e.id,label:"Id"},{nameControl:"name",type:"text",value:null==e?void 0:e.name,label:"Nombre",validators:[l.u.required]},{nameControl:"description",type:"text",value:null==e?void 0:e.description,label:"Descripci\xf3n"},{nameControl:"status_id",type:"select",value:null==e?void 0:e.status_id,label:"Estado",options:this.statuses,validators:[l.u.required]}]}getStatus(){this.statusService.getStatus("ALL").pipe(Object(o.a)(e=>e.map(e=>({name:e.name,value:e.id}))),Object(c.a)(1)).subscribe(e=>this.statuses=e)}storeCategory(e){this.categoriesService.storeCategory(e).pipe(Object(c.a)(1)).subscribe(e=>{console.log(e)})}updateCategory(e){this.categoriesService.updateCategory(e).pipe(Object(c.a)(1)).subscribe(e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](h),d["\u0275\u0275directiveInject"](b.b),d["\u0275\u0275directiveInject"](f.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["mvd-categories"]],viewQuery:function(e,t){var a;1&e&&d["\u0275\u0275staticViewQuery"](r.a,!0),2&e&&d["\u0275\u0275queryRefresh"](a=d["\u0275\u0275loadQuery"]())&&(t.paginator=a.first)},decls:26,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],["mat-flat-button","","color","",1,"btn-simple"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"mat-card",0),d["\u0275\u0275elementStart"](1,"mat-card-header"),d["\u0275\u0275elementStart"](2,"mat-card-title"),d["\u0275\u0275text"](3,"Tipos de Propiedad"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"mat-card-subtitle"),d["\u0275\u0275text"](5,"Administrar Tipos"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"div",1),d["\u0275\u0275elementStart"](7,"button",2),d["\u0275\u0275listener"]("click",(function(){return t.openDialog()})),d["\u0275\u0275elementStart"](8,"mat-icon",3),d["\u0275\u0275text"](9,"add"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](10," Crear "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"button",4),d["\u0275\u0275elementStart"](12,"mat-icon",3),d["\u0275\u0275text"](13,"print"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](14," Imprimir "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"button",4),d["\u0275\u0275elementStart"](16,"mat-icon",3),d["\u0275\u0275text"](17,"save_alt"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275text"](18," Exportar "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"mvd-input-search",5),d["\u0275\u0275listener"]("changeSearch",(function(e){return t.search(e)})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"mat-card-content"),d["\u0275\u0275elementStart"](21,"mvd-data-table",6),d["\u0275\u0275listener"]("actionChange",(function(e){return t.itemAction(e)})),d["\u0275\u0275pipe"](22,"async"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](23,"mat-paginator",7),d["\u0275\u0275listener"]("page",(function(e){return t.paginatorChange(e)})),d["\u0275\u0275pipe"](24,"async"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](25,"span",8),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](19),d["\u0275\u0275property"]("noteFilterBy","Filtra por T\xedtulo, C\xf3digo o Direcci\xf3n"),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("columns",t.columns)("dataSource",d["\u0275\u0275pipeBind1"](22,6,t.dataSource)),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("length",d["\u0275\u0275pipeBind1"](24,8,t.totalResut))("pageSize",t.perPage)("pageSizeOptions",d["\u0275\u0275pureFunction0"](10,j)))},directives:[S.a,S.c,S.f,S.e,v.b,C.a,y.a,S.b,I.a,r.a],pipes:[i.b],styles:[""]}),e})()}];let k=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.f.forChild(E)],n.f]}),e})();var O=a("PCNd");let w=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,k,O.a]]}),e})()},c2LI:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("AytR"),n=a("lJxs"),r=a("fXoL"),s=a("tk/3");let o=(()=>{class e{constructor(e){this.http=e}getStatus(e){return this.http.get(`${i.a.API}statuses?for_element=${e}`).pipe(Object(n.a)(e=>e.data))}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](s.b))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);