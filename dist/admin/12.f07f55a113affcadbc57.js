(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{U5Jw:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoriesModule",(function(){return U}));var s=a("ofXK"),i=a("tyNb"),r=a("M9IT"),o=a("GH7h"),n=a("lJxs"),c=a("IzEk"),u=a("3Pt+"),l=a("fXoL"),p=a("tk/3"),b=a("AytR"),d=a("2Vo4"),g=a("dNgK");let h=(()=>{class t{constructor(t,e){this.http=t,this.snackBar=e,this.resultSubject$=new d.a(null)}get resultItems$(){return this.resultSubject$}setItems(t){this.resultSubject$.next(t)}storeCategory(t){return this.http.post(`${b.a.API}${b.a.routesCRUD.categories}`,t).pipe(Object(n.a)(t=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Se cre\xf3 correctamente","success-snack-bar"),t.data)))}updateCategory(t){return this.http.put(`${b.a.API}${b.a.routesCRUD.categories}/${t.id}`,t).pipe(Object(n.a)(t=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Actualizado correctamente","success-snack-bar"),t.data)))}getCategories(t=1,e=20,a="",s="desc"){return this.http.get(`${b.a.API}${b.a.routesCRUD.categories}`,{params:(new p.e).set("page",t.toString()).set("filter",a).set("sort",s).set("per_page",e.toString())}).pipe(Object(n.a)(t=>(console.log(t),this.setItems(t),t)))}deleteCategory(t){return this.http.delete(`${b.a.API}${b.a.routesCRUD.categories}/${t}`).pipe(Object(n.a)(t=>(this.getCategories(1,20,"","desc").pipe(Object(c.a)(1)).subscribe(),this.openSnackBar("Eliminado correctamente","success-snack-bar"),t.data)))}openSnackBar(t,e,a=""){this.snackBar.open(t,a,{duration:1e3,horizontalPosition:"center",verticalPosition:"top",panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(l.Yb(p.b),l.Yb(g.a))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=a("0IaG"),f=a("c2LI"),C=a("Wp6s"),v=a("bTqV"),S=a("NFeN"),y=a("JhQZ"),D=a("lkLn");const I=function(){return[20,50,100]},O=[{path:"",component:(()=>{class t{constructor(t,e,a){this.categoriesService=t,this.dialog=e,this.statusService=a,this.columns=[{title:"ID",col:"id"},{title:"Nombre",col:"name"},{title:"Descripci\xf3n",col:"description"},{title:"Estado",col:"status"}],this.pageDefault=1,this.perPage=10,this.orden="desc",this.filter="",this.result=this.categoriesService.resultItems$}ngOnInit(){this.getCategories(this.pageDefault,this.perPage,this.filter,this.orden),this.getStatus()}paginatorChange(t){console.log(t),this.getCategories(t.pageIndex+1,t.pageSize)}getCategories(t,e,a,s){this.subscroption=this.categoriesService.getCategories(t,e,a,s).subscribe(t=>this.loadData())}loadData(){this.dataSource=this.result.pipe(Object(n.a)(t=>t.data.data.map(t=>({id:t.id,name:t.name,description:t.description,status_id:t.status_id,status:t.status.name})))),this.totalResut=this.result.pipe(Object(n.a)(t=>t.data.total))}search(t){this.getCategories(this.pageDefault,this.perPage,t,this.orden)}deleteItem(t){return this.categoriesService.deleteCategory(t)}itemAction(t){console.log(t),"delete"===t.action&&this.deleteItem(t.element.id).pipe(Object(c.a)(1)).subscribe(t=>console.log(t)),"edit"===t.action&&this.openDialog(t.element)}ngOnDestroy(){this.subscroption.unsubscribe()}add(){}openDialog(t){return this.dialog.open(o.a,{width:"850px",data:this.setFields(t)}).afterClosed().subscribe(t=>{t&&(t.id?this.updateCategory(t):this.storeCategory(t))})}setFields(t){return[{nameControl:"id",type:"hidden",value:null==t?void 0:t.id,label:"Id"},{nameControl:"name",type:"text",value:null==t?void 0:t.name,label:"Nombre",validators:[u.u.required]},{nameControl:"description",type:"text",value:null==t?void 0:t.description,label:"Descripci\xf3n"},{nameControl:"status_id",type:"select",value:null==t?void 0:t.status_id,label:"Estado",options:this.statuses,validators:[u.u.required]}]}getStatus(){this.statusService.getStatus("ALL").pipe(Object(n.a)(t=>t.map(t=>({name:t.name,value:t.id}))),Object(c.a)(1)).subscribe(t=>this.statuses=t)}storeCategory(t){this.categoriesService.storeCategory(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t)})}updateCategory(t){this.categoriesService.updateCategory(t).pipe(Object(c.a)(1)).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(h),l.Ob(m.b),l.Ob(f.a))},t.\u0275cmp=l.Ib({type:t,selectors:[["mvd-categories"]],viewQuery:function(t,e){var a;1&t&&l.xc(r.a,!0),2&t&&l.pc(a=l.cc())&&(e.paginator=a.first)},decls:26,vars:11,consts:[[1,"card","mat-elevation-z16","animate__animated","animate__slideInRight"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],[1,"material-icons-round"],["mat-flat-button","","color","",1,"btn-simple"],[3,"noteFilterBy","changeSearch"],[3,"columns","dataSource","actionChange"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions","page"],[1,"border"]],template:function(t,e){1&t&&(l.Ub(0,"mat-card",0),l.Ub(1,"mat-card-header"),l.Ub(2,"mat-card-title"),l.Dc(3,"Tipos de Propiedad"),l.Tb(),l.Ub(4,"mat-card-subtitle"),l.Dc(5,"Administrar Tipos"),l.Tb(),l.Ub(6,"div",1),l.Ub(7,"button",2),l.bc("click",(function(){return e.openDialog()})),l.Ub(8,"mat-icon",3),l.Dc(9,"add"),l.Tb(),l.Dc(10," Crear "),l.Tb(),l.Ub(11,"button",4),l.Ub(12,"mat-icon",3),l.Dc(13,"print"),l.Tb(),l.Dc(14," Imprimir "),l.Tb(),l.Ub(15,"button",4),l.Ub(16,"mat-icon",3),l.Dc(17,"save_alt"),l.Tb(),l.Dc(18," Exportar "),l.Tb(),l.Tb(),l.Ub(19,"mvd-input-search",5),l.bc("changeSearch",(function(t){return e.search(t)})),l.Tb(),l.Tb(),l.Ub(20,"mat-card-content"),l.Ub(21,"mvd-data-table",6),l.bc("actionChange",(function(t){return e.itemAction(t)})),l.gc(22,"async"),l.Tb(),l.Ub(23,"mat-paginator",7),l.bc("page",(function(t){return e.paginatorChange(t)})),l.gc(24,"async"),l.Tb(),l.Tb(),l.Pb(25,"span",8),l.Tb()),2&t&&(l.Cb(19),l.lc("noteFilterBy","Filtra por T\xedtulo, C\xf3digo o Direcci\xf3n"),l.Cb(2),l.lc("columns",e.columns)("dataSource",l.hc(22,6,e.dataSource)),l.Cb(2),l.lc("length",l.hc(24,8,e.totalResut))("pageSize",e.perPage)("pageSizeOptions",l.mc(10,I)))},directives:[C.a,C.c,C.f,C.e,v.b,S.a,y.a,C.b,D.a,r.a],pipes:[s.b],styles:[""]}),t})()}];let j=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(O)],i.f]}),t})();var T=a("PCNd");let U=(()=>{class t{}return t.\u0275mod=l.Mb({type:t}),t.\u0275inj=l.Lb({factory:function(e){return new(e||t)},imports:[[s.c,j,T.a]]}),t})()},c2LI:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var s=a("AytR"),i=a("lJxs"),r=a("fXoL"),o=a("tk/3");let n=(()=>{class t{constructor(t){this.http=t}getStatus(t){return this.http.get(`${s.a.API}statuses?for_element=${t}`).pipe(Object(i.a)(t=>t.data))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(o.b))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);